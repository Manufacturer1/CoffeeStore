@model CoffeeStore.Models.DiscountViewModel

@{
    ViewBag.Title = "Set Discount";
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewData["RenderNavbar"] = true;
}

<div class="container" style="margin-top:200px">


    <h2>Set Discount</h2>



    @using (Html.BeginForm("SetDiscount","Account",FormMethod.Post))
    {
        <div class="form-group">
            @Html.LabelFor(model => model.Percentage, htmlAttributes: new { @class = "control-label" })
            @Html.EditorFor(model => model.Percentage, new { htmlAttributes = new { @class = "form-control" } })
            @Html.ValidationMessageFor(model => model.Percentage, "", new { @class = "text-danger" })
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.ExpirationTime, htmlAttributes: new { @class = "control-label" })
            @Html.DropDownListFor(model => model.ExpirationTime, GetExpirationTimes(), "Select Expiration Time", new { @class = "form-control" })
            @Html.ValidationMessageFor(model => model.ExpirationTime, "", new { @class = "text-danger" })
        </div>


        <button type="submit" class="btn btn-primary">Save</button>
    }
</div>

@functions {
  
    public List<SelectListItem> GetExpirationTimes()
    {
        List<SelectListItem> expirationTimes = new List<SelectListItem>();

        DateTime currentTime = DateTime.Now;
        DateTime maxTime = currentTime.AddHours(24);


        while (currentTime < maxTime)
        {
            expirationTimes.Add(new SelectListItem { Text = currentTime.ToString(), Value = currentTime.ToString("yyyy-MM-dd HH:mm:ss") });
            currentTime = currentTime.AddHours(1); 
        }

        return expirationTimes;
    }
}